<!DOCTYPE html>
<html lang="es">
<head> 
  <link rel="stylesheet" href="carrito.css">
  <meta charset="UTF-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
  <title>MNM Pulseras | Personaliza tu pulsera</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom right, #b3e5fc, #81d4fa, #4fc3f7);
      color: #003366;
      text-align: center;
      padding: 30px;
    }

    h1 {
      color: #01579b;
      font-size: 2.5em;
      margin-bottom: 15px;
    }

    .color-option {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 8px 0;
      gap: 10px;
      font-size: 1.1em;
    }

    .color-square {
      width: 25px;
      height: 25px;
      border-radius: 4px;
      display: inline-block;
      border: 1px solid #003366;
    }

    input[type="number"] {
      width: 60px;
      padding: 5px;
      border: 2px solid #4fc3f7;
      border-radius: 6px;
      text-align: center;
      font-size: 1em;
    }

    button {
      background-color: #4fc3f7;
      border: none;
      padding: 12px 25px;
      border-radius: 12px;
      color: white;
      font-size: 1.1em;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 20px;
      margin-right: 10px;
    }

    button:hover {
      background-color: #29b6f6;
      transform: scale(1.05);
    }

    #contador, #precio-total {
      font-weight: bold;
      margin: 15px 0;
      font-size: 1.2em;
      transition: color 0.3s ease;
    }

    #mensaje {
      color: red;
      font-weight: bold;
      margin-top: 10px;
      display: none;
    }

    footer {
      margin-top: 40px;
      background-color: #bbdefb;
      padding: 15px;
      border-radius: 10px;
      font-size: 0.9em;
      color: #004c8c;
    }

    #mnm-carrito {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      background: #cce7ff;
      color: black;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      overflow: hidden;
      z-index: 9999;
    }

    #mnm-carrito-header {
      background: #1e3a5f;
      color: white;
      padding: 12px;
      font-weight: bold;
      text-align: center;
      cursor: pointer;
    }

    #mnm-carrito-items {
      padding: 12px;
      max-height: 250px;
      overflow-y: auto;
    }

    #mnm-carrito-items div {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    #mnm-carrito-footer {
      padding: 12px;
      border-top: 1px solid rgba(0,0,0,0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 5px;
    }
  </style>
</head>
<body>
  <h1>MNM Pulseras</h1>
  <h1>Crea tu pulsera personalizada</h1>
  <p>Elige cu√°ntas cuerdas de cada color quieres (deben sumar <strong>7</strong>):</p>

  <div id="colores">
    <div class="color-option"><div class="color-square" style="background-color:red;"></div><label>Rojo</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:orange;"></div><label>Naranja</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:yellow;"></div><label>Amarillo</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:#90ee90;"></div><label>Verde claro</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:#006400;"></div><label>Verde oscuro</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:#87cefa;"></div><label>Azul claro</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:#00008b;"></div><label>Azul oscuro</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:pink;"></div><label>Rosa</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:purple;"></div><label>Morado</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:white;border:1px solid #003366;"></div><label>Blanco</label><input type="number" min="0" max="7" value="0"></div>
    <div class="color-option"><div class="color-square" style="background-color:black;"></div><label>Negro</label><input type="number" min="0" max="7" value="0"></div>
  </div>

  <p id="contador">Has elegido 0 de 7 cuerdas</p>

  <div id="cantidad-personalizada-container" style="margin:15px 0;">
    <label for="cantidad-personalizada">Cantidad de pulseras:</label>
    <input type="number" id="cantidad-personalizada" min="1" value="1">
  </div>

  <p id="precio-total">Precio: 0 ‚Ç¨</p>
  <p id="mensaje">‚ö†Ô∏è Las cuerdas deben sumar exactamente 7.</p>

  <!-- Botones -->
  <button onclick="enviarPedido()">Enviar al correo</button>
  <button onclick="agregarAlCarrito()">A√±adir al carrito</button>

  <footer>
    <p>Los pedidos se env√≠an a: <strong>mnm1pulseras@gmail.com</strong></p>
  </footer>

  <div id="mnm-carrito">
    <div id="mnm-carrito-header">üõí Tu Carrito</div>
    <div id="mnm-carrito-items"></div>
    <div id="mnm-carrito-footer">
      <span id="mnm-carrito-total">Total: 0‚Ç¨</span>
      <button id="mnm-carrito-clear">Vaciar</button>
    </div>
  </div>

  <script>
    const inputs = document.querySelectorAll('#colores input');
    const contador = document.getElementById('contador');
    const mensaje = document.getElementById('mensaje');
    const cantidadInput = document.getElementById('cantidad-personalizada');
    const precioTotal = document.getElementById('precio-total');
    const contenedorCantidad = document.getElementById('cantidad-personalizada-container');

    const carritoItems = document.getElementById('mnm-carrito-items');
    const carritoTotal = document.getElementById('mnm-carrito-total');
    const carritoClear = document.getElementById('mnm-carrito-clear');

    const precioUnidad = 1.5;
    let carrito = [];

    // Contador de cuerdas y precio
    function actualizarContador() {
      let totalCuerdas = 0;
      inputs.forEach(input => totalCuerdas += parseInt(input.value) || 0);

      contador.textContent = `Has elegido ${totalCuerdas} de 7 cuerdas`;
      contador.style.color = (totalCuerdas === 7) ? "#388e3c" : "#d32f2f";

      actualizarPrecio();
    }

    function actualizarPrecio() {
      let cantidadTotal = parseInt(cantidadInput.value) || 1;
      let precio = precioUnidad * cantidadTotal;
      precioTotal.textContent = `Precio: ${precio} ‚Ç¨`;
    }

    inputs.forEach(input => input.addEventListener('input', actualizarContador));
    cantidadInput.addEventListener('input', actualizarPrecio);

    // Funci√≥n enviar correo
    function enviarPedido() {
      let totalCuerdas = 0;
      const seleccion = [];

      inputs.forEach(input => {
        const cantidad = parseInt(input.value) || 0;
        if(cantidad>0){
          const color = input.parentElement.querySelector('label').textContent;
          seleccion.push(`${color}: ${cantidad}`);
        }
        totalCuerdas += cantidad;
      });

      if(totalCuerdas !== 7){
        mensaje.style.display = 'block';
        setTimeout(()=>mensaje.style.display='none',2000);
        return;
      }

      let cantidadTotal = parseInt(cantidadInput.value) || 1;
      const cuerpo = encodeURIComponent(`Cuerdas elegidas:\n${seleccion.join('\n')}\nCantidad: ${cantidadTotal} pulsera(s)\nPrecio: ${precioTotal.textContent.replace('Precio: ','')}`);
      const asunto = encodeURIComponent("Nuevo pedido de pulsera MNM");
      window.location.href = `mailto:mnm1pulseras@gmail.com?subject=${asunto}&body=${cuerpo}`;
    }

    // Funci√≥n a√±adir al carrito
    function agregarAlCarrito(){
      let totalCuerdas = 0;
      const seleccion = [];

      inputs.forEach(input => {
        const cantidad = parseInt(input.value) || 0;
        if(cantidad>0){
          const color = input.parentElement.querySelector('label').textContent;
          seleccion.push({color, cantidad});
        }
        totalCuerdas += cantidad;
      });

      if(totalCuerdas !== 7){
        mensaje.style.display = 'block';
        setTimeout(()=>mensaje.style.display='none',2000);
        return;
      }

      let cantidadTotal = parseInt(cantidadInput.value) || 1;
      const precio = precioUnidad * cantidadTotal;

      carrito.push({seleccion, cantidadTotal, precio});
      actualizarCarritoVisual();
    }

    function actualizarCarritoVisual(){
      carritoItems.innerHTML = '';
      let total = 0;
      carrito.forEach((item,i)=>{
        total += item.precio;
        const div = document.createElement('div');
        div.innerHTML = `Pulsera ${i+1}: ${item.seleccion.map(s=>s.color+' ('+s.cantidad+')').join(', ')} - ${item.cantidadTotal} unidad(es) - ${item.precio.toFixed(2)}‚Ç¨`;

        const btn = document.createElement('button');
        btn.textContent='X';
        btn.style.marginLeft='5px';
        btn.addEventListener('click',()=>{
          carrito.splice(i,1);
          actualizarCarritoVisual();
        });

        div.appendChild(btn);
        carritoItems.appendChild(div);
      });

      carritoTotal.textContent=`Total: ${total.toFixed(2)}‚Ç¨`;
    }

    carritoClear.addEventListener('click', ()=>{
      carrito=[];
      actualizarCarritoVisual();
    });

    actualizarContador();
  </script>
</body>
</html>












